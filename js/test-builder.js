// ูุธุงู ุจูุงุก ุงูุงุฎุชุจุงุฑุงุช ุงููุจุณุท
class TestBuilder {
    constructor() {
        this.tests = {};
        this.currentTestId = 1;
    }

    // ุฅูุดุงุก ุงุฎุชุจุงุฑ ุฌุฏูุฏ
    createTest(title, timeInMinutes = 15) {
        const testId = this.currentTestId++;
        this.tests[testId] = {
            title: title,
            time: timeInMinutes,
            questions: []
        };
        return testId;
    }

    // ุฅุถุงูุฉ ุณุคุงู ุฅูู ุงูุงุฎุชุจุงุฑ
    addQuestion(testId, question, options, correctIndex, explanation = '') {
        if (!this.tests[testId]) {
            console.error('ุงูุงุฎุชุจุงุฑ ุบูุฑ ููุฌูุฏ');
            return false;
        }

        this.tests[testId].questions.push({
            question: question,
            options: options,
            correct: correctIndex,
            explanation: explanation
        });

        return true;
    }

    // ุฅูุดุงุก ุงุฎุชุจุงุฑ ุณุฑูุน (ุทุฑููุฉ ูุฎุชุตุฑุฉ)
    quickTest(title, questionsArray, timeInMinutes = 15) {
        const testId = this.createTest(title, timeInMinutes);
        
        questionsArray.forEach(q => {
            this.addQuestion(testId, q.question, q.options, q.correct, q.explanation);
        });

        return testId;
    }

    // ุงูุญุตูู ุนูู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ
    getTest(testId) {
        return this.tests[testId];
    }

    // ุชูููุฏ HTML ููุงุฎุชุจุงุฑ
    generateTestHTML(testId) {
        const test = this.getTest(testId);
        if (!test) return '';

        return `
            <div class="test-card" data-test-id="${testId}">
                <h3>${test.title}</h3>
                <p>โฑ๏ธ ุงูููุช: ${test.time} ุฏูููุฉ</p>
                <p>โ ุนุฏุฏ ุงูุฃุณุฆูุฉ: ${test.questions.length}</p>
                <p>๐ฏ ุฃูุถู ูุชูุฌุฉ: <span id="bestScore${testId}">--</span></p>
                <button class="btn btn-primary" onclick="startTest(${testId})">ุจุฏุก ุงูุงุฎุชุจุงุฑ</button>
            </div>
        `;
    }

    // ุฅุถุงูุฉ ุงุฎุชุจุงุฑ ุฅูู ุตูุญุฉ ูุนููุฉ
    addTestToPage(testId, containerId) {
        const container = document.getElementById(containerId);
        if (container) {
            container.innerHTML += this.generateTestHTML(testId);
        }
    }
}

// ุฅูุดุงุก ูุณุฎุฉ ุนุงูุฉ ููุงุณุชุฎุฏุงู
const testBuilder = new TestBuilder();

// ุฃูุซูุฉ ุงุฎุชุจุงุฑุงุช ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู
const sampleTests = {
    // ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ุงูุฃููู
    unit1: () => testBuilder.quickTest('๐ฌ ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ุงูุฃููู: ุงููุงุฏุฉ ูุงูุทุงูุฉ', [
        {
            question: "ูุง ูู ุญุงูุงุช ุงููุงุฏุฉ ุงูุซูุงุซ ุงูุฑุฆูุณูุฉุ",
            options: [
                "ุงูุตูุจุฉุ ุงูุณุงุฆูุฉุ ุงูุบุงุฒูุฉ",
                "ุงูุณุงุฆูุฉุ ุงูุจูุงุฒูุงุ ุงูุตูุจุฉ", 
                "ุงูุบุงุฒูุฉุ ุงูุตูุจุฉุ ุงูุจููุฑูุฉ",
                "ุงููุฐุงุจุฉุ ุงููุนููุฉุ ุงูุตูุจุฉ"
            ],
            correct: 0,
            explanation: "ุงูุญุงูุงุช ุงูุฑุฆูุณูุฉ ูููุงุฏุฉ ูู: ุงูุตูุจุฉุ ุงูุณุงุฆูุฉุ ุงูุบุงุฒูุฉ"
        },
        {
            question: "ุนูุฏ ุชุณุฎูู ุงููุงุฏุฉ ุงูุตูุจุฉ ุชุชุญูู ุฅูู:",
            options: [
                "ุงูุญุงูุฉ ุงูุณุงุฆูุฉ",
                "ุงูุญุงูุฉ ุงูุบุงุฒูุฉ",
                "ุชุจูู ุตูุจุฉ",
                "ุชุชุญูู ุฅูู ุจูุงุฒูุง"
            ],
            correct: 0,
            explanation: "ุชุชุญูู ุงููุงุฏุฉ ุงูุตูุจุฉ ุฅูู ุณุงุฆูุฉ ุนูุฏ ุงูุชุณุฎูู ูู ุนูููุฉ ุชุณูู ุงูุงูุตูุงุฑ"
        },
        {
            question: "ุฃู ูู ุงูุนูููุงุช ุงูุชุงููุฉ ููุซู ุชุญูู ุงููุงุฏุฉ ูู ุงูุญุงูุฉ ุงูุณุงุฆูุฉ ุฅูู ุงูุบุงุฒูุฉุ",
            options: [
                "ุงูุชูุซูู",
                "ุงูุงูุตูุงุฑ",
                "ุงูุชุฌูุฏ",
                "ุงูุชุจุฎุฑ"
            ],
            correct: 3,
            explanation: "ุงูุชุจุฎุฑ ูู ุนูููุฉ ุชุญูู ุงููุงุฏุฉ ูู ุงูุญุงูุฉ ุงูุณุงุฆูุฉ ุฅูู ุงูุบุงุฒูุฉ"
        }
    ], 15),

    // ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ุงูุซุงููุฉ
    unit2: () => testBuilder.quickTest('๐งช ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ุงูุซุงููุฉ: ุงูุชูุงุนูุงุช ุงูููููุงุฆูุฉ', [
        {
            question: "ุงูุชูุงุนู ุงูููููุงุฆู ูู ุนูููุฉ:",
            options: [
                "ุชุบูุฑ ูู ุดูู ุงููุงุฏุฉ ููุท",
                "ุชุบูุฑ ูู ุชุฑุชูุจ ุงูุฐุฑุงุช ูุชูููู ููุงุฏ ุฌุฏูุฏุฉ",
                "ุชุบูุฑ ูู ุญุฌู ุงููุงุฏุฉ ููุท",
                "ุชุบูุฑ ูู ููู ุงููุงุฏุฉ ููุท"
            ],
            correct: 1,
            explanation: "ุงูุชูุงุนู ุงูููููุงุฆู ูุชุถูู ุชูุณูุฑ ุฑูุงุจุท ูุชูููู ุฑูุงู ุฌุฏูุฏุฉ ููุง ููุชุฌ ููุงุฏ ุฌุฏูุฏุฉ"
        },
        {
            question: "ูู ุงููุนุงุฏูุฉ ุงูููููุงุฆูุฉุ ุงูููุงุฏ ุงูููุฌูุฏุฉ ุนูู ูุณุงุฑ ุงูุณูู ุชุณูู:",
            options: [
                "ุงูููุงุชุฌ",
                "ุงูููุงุฏ ุงููุชูุงุนูุฉ",
                "ุงูุนูุงูู ุงููุณุงุนุฏุฉ",
                "ุงููุญูุฒุงุช"
            ],
            correct: 1,
            explanation: "ุงูููุงุฏ ุงููุชูุงุนูุฉ (Reactants) ูู ุงูููุงุฏ ุงูุฏุงุฎูุฉ ูู ุงูุชูุงุนู ูุชูุชุจ ุนูู ูุณุงุฑ ุงูุณูู"
        }
    ], 12),

    // ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ุงูุซุงูุซุฉ
    unit3: () => testBuilder.quickTest('๐ฟ ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ุงูุซุงูุซุฉ: ุชุฏูู ุงูุทุงูุฉ', [
        {
            question: "ุงูุจูุงุก ุงูุถูุฆู ูุญุฏุซ ูู:",
            options: [
                "ุงูุฌุฐูุฑ ููุท",
                "ุงูุฃูุฑุงู ุงูุฎุถุฑุงุก",
                "ุงูุณุงู ููุท", 
                "ุฌููุน ุฃุฌุฒุงุก ุงููุจุงุช"
            ],
            correct: 1,
            explanation: "ุงูุจูุงุก ุงูุถูุฆู ูุญุฏุซ primarily ูู ุงูุฃูุฑุงู ุงูุฎุถุฑุงุก ุญูุซ ุชูุฌุฏ ุงูุจูุงุณุชูุฏุงุช ุงูุฎุถุฑุงุก"
        },
        {
            question: "ุงูุนูููุฉ ุงูุชู ุชุทูู ุงูุทุงูุฉ ูู ุงูุฎููุฉ ุชุณูู:",
            options: [
                "ุงูุจูุงุก ุงูุถูุฆู",
                "ุงูุชููุณ ุงูุฎููู",
                "ุงูุชูุซูู ุงูุบุฐุงุฆู",
                "ุงูุงููุณุงู ุงูุฎููู"
            ],
            correct: 1,
            explanation: "ุงูุชููุณ ุงูุฎููู ูู ุงูุนูููุฉ ุงูุชู ุชุทูู ุงูุทุงูุฉ ุงููุฎุฒูุฉ ูู ุงูุฌููููุฒ"
        }
    ], 18)
};

// ุฏุงูุฉ ูุชุญููู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงูุฌุงูุฒุฉ
function loadAllSampleTests() {
    // ุฅูุดุงุก ุงูุงุฎุชุจุงุฑุงุช ุงูุฌุงูุฒุฉ
    sampleTests.unit1();
    sampleTests.unit2();
    sampleTests.unit3();

    // ุฅุถุงูุฉ ุงุฎุชุจุงุฑ ุดุงูู
    testBuilder.createTest('๐ ุงูุงุฎุชุจุงุฑ ุงูุดุงูู', 30);
    
    console.log('โ ุชู ุชุญููู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงูุฌุงูุฒุฉ');
}

// ุงูุชุตุฏูุฑ ููุงุณุชุฎุฏุงู ูู ุงููููุงุช ุงูุฃุฎุฑู
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { testBuilder, sampleTests, loadAllSampleTests };
}