<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª - Ø¹Ù„ÙˆÙ… Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="lessons/lessons.css">
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª ØµÙØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª */
        .tests-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .tests-header {
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .tests-header h1 {
            margin: 0;
            font-size: 2.5rem;
        }

        .tests-header p {
            margin: 10px 0 0 0;
            font-size: 1.2rem;
            opacity: 0.9;
        }
        .logo, .teacher-photo {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid var(--white);
    object-fit: cover;
}

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #2d3748;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: #4a5568;
            transform: translateX(-5px);
        }

        .tests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .test-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-right: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .test-header h4 {
            margin: 0;
            color: #2d3748;
            flex: 1;
        }
        
        .test-badge {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        .test-info {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .test-info span {
            color: #4a5568;
            font-size: 14px;
        }
        
        .test-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid #667eea;
            color: #667eea;
        }
        
        .btn-danger {
            background: #e53e3e;
            color: white;
        }
        
        .btn-warning {
            background: #ed8936;
            color: white;
        }
        
        .btn-success {
            background: #38a169;
            color: white;
        }
        
        .btn-secondary {
            background: #718096;
            color: white;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #718096;
            background: #f7fafc;
            border-radius: 10px;
        }

        .empty-state .icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header>

    <div class="container tests-container">
        <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© -->
        <a href="index.html" class="back-button">
            â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        </a>

        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div class="tests-header">
            <h1>ğŸ“š Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h1>
            <p>Ø§Ø®ØªØ± Ø§Ø®ØªØ¨Ø§Ø±Ù‹Ø§ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ù„ Ø£Ùˆ Ù‚Ù… Ø¨Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</p>
        </div>

        <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª -->
       

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª -->
        <div id="testsList">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
        </div>
    </div>

    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <footer>
        <div class="container">
            <h3>ğŸ“ Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h3>
            <p>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø­Ù…Ø²Ø© Ø§Ù„Ø³Ø­ÙŠØªÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ©</p>
            <p class="copyright">Â© 2024 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
        </div>
    </footer>

    <script>
        // Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function displayTests() {
            const container = document.getElementById('testsList');
            if (!container) return;
            
            try {toLocaleDateString
                const savedTests = JSON.parse(localStorage.getItem('savedTests') || '{}');
                
                if (Object.keys(savedTests).length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="icon">ğŸ“</div>
                            <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯</h3>
                            <p>Ø§Ø³ØªÙˆØ±Ø¯ Ø§Ø®ØªØ¨Ø§Ø±Ùƒ Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Excel</p>
                            <a href="import-tests1.html" class="btn btn-primary" style="margin-top: 15px;">
                                ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
                            </a>
                        </div>
                    `;
                    return;
                }
        
                let html = `<div class="tests-grid">`;
                
                Object.values(savedTests).forEach(test => {
                    const date = new Date(test.createdAt).toLocaleDateString('ar-EG');
                    
                    html += `
                        <div class="test-card">
                            <div class="test-header">
                                <h4>${test.title}</h4>
                                <span class="test-badge">${test.subject}</span>
                            </div>
                            <div class="test-info">
                                <span>ğŸ•’ ${test.time} Ø¯Ù‚ÙŠÙ‚Ø©</span>
                                <span>â“ ${test.questionCount} Ø³Ø¤Ø§Ù„</span>
                                <span>ğŸ“… ${date}</span>
                            </div>
                            <div class="test-actions">
                                <button class="btn btn-primary" onclick="startTest('${test.id}')">
                                    â–¶ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                                </button>
                                <button class="btn btn-outline" onclick="editTest('${test.id}')">
                                    âœ ØªØ¹Ø¯ÙŠÙ„
                                </button>
                                <button class="btn btn-danger" onclick="deleteTest('${test.id}')">
                                    ğŸ—‘ Ø­Ø°Ù
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                container.innerHTML = html;
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:', error);
                container.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #e53e3e;">
                        âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
                    </div>
                `;
            }
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
        function startTest(testId) {
            console.log('Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:', testId);
            
            // Ø­ÙØ¸ Ù…Ø¹Ø±Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
            localStorage.setItem('currentTestId', testId);
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            window.location.href = 'test.html';
        }
        
        // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
        function editTest(testId) {
            const savedTests = JSON.parse(localStorage.getItem('savedTests') || '{}');
            const test = savedTests[testId];
            
            if (test) {
                // Ù†Ù‚Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØµÙØ­Ø© Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
                localStorage.setItem('editTestData', JSON.stringify(test));
                window.location.href = 'import-tests1.html?edit=' + testId;
            }
        }
        
        // Ø­Ø°Ù Ø§Ø®ØªØ¨Ø§Ø±
        function deleteTest(testId) {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ')) {
                const savedTests = JSON.parse(localStorage.getItem('savedTests') || '{}');
                delete savedTests[testId];
                localStorage.setItem('savedTests', JSON.stringify(savedTests));
                
                displayTests();
                alert('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­');
            }
        }
        
        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
        function clearAllTests() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.')) {
                localStorage.removeItem('savedTests');
                displayTests();
                alert('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª');
            }
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        document.addEventListener('DOMContentLoaded', function() {
            displayTests();
        });
    </script>
</body>
</html>